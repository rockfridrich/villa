# Villa Environment Configuration
# ================================
# This file documents ALL environment variables used across the monorepo.
# Copy to .env.local for local development (gitignored).
#
# Sync commands:
#   ./scripts/env-sync.sh pull github    # Pull secrets from GitHub to .env.local
#   ./scripts/env-sync.sh push github    # Push .env.local to GitHub Secrets
#   ./scripts/env-sync.sh push do        # Push to DigitalOcean App Platform
#   ./scripts/env-sync.sh validate       # Validate .env.local has all required vars

# ============================================================================
# INFRASTRUCTURE SECRETS (GitHub Secrets + DO App Platform)
# ============================================================================

# DigitalOcean
DIGITALOCEAN_ACCESS_TOKEN=           # DO API token for deployments

# Cloudflare
CLOUDFLARE_API_TOKEN=                # Cloudflare API token
CLOUDFLARE_ZONE_ID=                  # villa.cash zone ID

# Database (PostgreSQL on DigitalOcean)
DATABASE_URL=                        # postgresql://user:pass@host:25060/villa?sslmode=require
DATABASE_POOL_URL=                   # postgresql://user:pass@host:25061/villa?sslmode=require (pooled)

# Blockchain
DEPLOYER_PRIVATE_KEY=                # Contract deployment key (Base Sepolia/Mainnet)
BASESCAN_API_KEY=                    # Etherscan API key for contract verification

# ============================================================================
# WEB APP (apps/web) - NEXT_PUBLIC_ vars are exposed to browser
# ============================================================================

# Application
NEXT_PUBLIC_APP_URL=http://localhost:3000
NODE_ENV=development

# Porto ID Configuration
NEXT_PUBLIC_PORTO_ENV=stg            # stg or prod
NEXT_PUBLIC_PORTO_DIALOG_HOST=https://id.porto.sh

# API
NEXT_PUBLIC_API_URL=/api             # API base URL (relative or absolute)

# Unforgettable SDK (Face Recovery - Phase 2)
NEXT_PUBLIC_UNFORGETTABLE_APP_ID=

# Map Configuration (OpenStreetMap)
NEXT_PUBLIC_TILE_SERVER_URL=https://tile.openstreetmap.org/{z}/{x}/{y}.png
NEXT_PUBLIC_MAP_DEFAULT_CENTER_LAT=10.9333
NEXT_PUBLIC_MAP_DEFAULT_CENTER_LNG=108.2833

# Development Settings
NEXT_PUBLIC_ENABLE_DEV_TOOLS=true
NEXT_PUBLIC_LOG_LEVEL=debug

# AI Configuration (optional)
ANTHROPIC_API_KEY=

# ============================================================================
# API SERVICE (apps/api)
# ============================================================================

# Server
PORT=3001
APP_ENV=local                        # local, development, staging, production, test

# Database overrides (optional - DATABASE_URL is primary)
DATABASE_SSL=                        # false, true, require, prefer
DB_MAX_CONNECTIONS=10
DB_IDLE_TIMEOUT=20
DB_CONNECT_TIMEOUT=10
DB_RETRY_ATTEMPTS=3
DB_RETRY_DELAY=1000
DB_ENABLE_FALLBACK=false             # true only for local dev

# Logging
LOG_LEVEL=debug
LOG_DB_CONFIG=false

# ============================================================================
# RELAY SERVICE (apps/relay)
# ============================================================================

# Chain Configuration
CHAIN_ENV=testnet                    # testnet (Base Sepolia) or production (Base)
BASE_RPC_URL=https://sepolia.base.org

# Merchant/Operator
MERCHANT_PRIVATE_KEY=                # Relay operator private key

# ============================================================================
# CONTRACTS (contracts/)
# ============================================================================

# Deployment (also uses DEPLOYER_PRIVATE_KEY, BASESCAN_API_KEY)
BASE_SEPOLIA_RPC_URL=https://sepolia.base.org
BASE_MAINNET_RPC_URL=https://mainnet.base.org

# ============================================================================
# CI/CD (GitHub Actions)
# ============================================================================

# These are set in GitHub Secrets, not in .env files:
# - DIGITALOCEAN_ACCESS_TOKEN
# - CLOUDFLARE_API_TOKEN
# - CLOUDFLARE_ZONE_ID
# - DATABASE_URL
# - DATABASE_POOL_URL
# - DEPLOYER_PRIVATE_KEY
# - BASESCAN_API_KEY

# ============================================================================
# TESTING
# ============================================================================

# Playwright
BASE_URL=http://localhost:3000       # Test base URL
CI=false                             # Set by CI environment
