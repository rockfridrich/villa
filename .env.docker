# Villa Docker Development Environment Variables
# =============================================================================
# Default environment variables for Docker development.
# Copy this file to .env for local overrides (gitignored).
#
# These defaults work out of the box. Override only what you need.
# =============================================================================

# =============================================================================
# PostgreSQL (Development)
# =============================================================================
POSTGRES_USER=villa
POSTGRES_PASSWORD=villa_dev_password
POSTGRES_DB=villa_dev
POSTGRES_PORT=5432

# Performance tuning
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_MAX_CONNECTIONS=100

# =============================================================================
# PostgreSQL (Testing)
# =============================================================================
POSTGRES_TEST_USER=villa_test
POSTGRES_TEST_PASSWORD=test_password
POSTGRES_TEST_DB=villa_test
POSTGRES_TEST_PORT=5433

# =============================================================================
# Application
# =============================================================================
NODE_ENV=development
APP_PORT=3000
APP_MEM_LIMIT=6g

# Database connection (points to Docker postgres)
DATABASE_URL=postgresql://villa:villa_dev_password@postgres:5432/villa_dev

# For host machine connection to Docker postgres
# DATABASE_URL=postgresql://villa:villa_dev_password@localhost:5432/villa_dev

# Watch mode for Docker development
WATCHPACK_POLLING=true

# =============================================================================
# Next.js Public Variables
# =============================================================================
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_CHAIN_ID=84532
NEXT_PUBLIC_ENABLE_DEV_TOOLS=true
NEXT_PUBLIC_LOG_LEVEL=debug

# Porto Configuration
NEXT_PUBLIC_PORTO_ENV=stg
NEXT_PUBLIC_PORTO_DIALOG_HOST=https://id.porto.sh

# =============================================================================
# Caddy (HTTPS Proxy)
# =============================================================================
CADDY_HTTP_PORT=80
CADDY_HTTPS_PORT=443
CADDY_DOMAIN=local.villa.cash

# Caddyfile selection
# Options: ./Caddyfile.local (hybrid), ./Caddyfile.dev (full docker), ./Caddyfile (production)
CADDYFILE=./Caddyfile.local

# =============================================================================
# API Service
# =============================================================================
API_PORT=3001
APP_ENV=local
LOG_LEVEL=debug

# =============================================================================
# Testing
# =============================================================================
# Set to true when running in CI
CI=false

# Base URL for E2E tests
# Use http://localhost:3000 for host-based testing
# Use http://app:3000 for container-based testing
BASE_URL=http://localhost:3000

# Playwright configuration
PLAYWRIGHT_WORKERS=2

# =============================================================================
# Development Mode Toggles
# =============================================================================
# Uncomment the mode you want to use:

# Mode: Hybrid (recommended)
# Next.js runs on host, Docker provides infrastructure
# CADDYFILE=./Caddyfile.local
# DATABASE_URL=postgresql://villa:villa_dev_password@localhost:5432/villa_dev

# Mode: Full Docker
# Everything runs in containers
# CADDYFILE=./Caddyfile.dev
# DATABASE_URL=postgresql://villa:villa_dev_password@postgres:5432/villa_dev
